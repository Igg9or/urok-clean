<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ textbook.title }} - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è–º–∏</title>
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <div class="header-left">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="–õ–æ–≥–æ—Ç–∏–ø" class="header-logo">
                <h1>{{ textbook.title }} ({{ textbook.grade }} –∫–ª–∞—Å—Å)</h1>
            </div>
            <div class="header-right">
                <a href="{{ url_for('manage_tasks') }}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
            </div>
        </header>

        <main class="textbook-tasks-container" data-textbook-id="{{ textbook.id }}">
            <div class="section-header">
                <h2>–®–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞–Ω–∏–π</h2>
                <button id="showFormBtn" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
            </div>
            <div class="bulk-actions">
                <button id="deleteSelectedBtn" class="btn btn-danger" disabled>–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</button>
                <button id="selectAllBtn" class="btn btn-secondary">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
            </div>

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
            <div id="taskForm" class="task-form hidden">
                <h3>–ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω –∑–∞–¥–∞–Ω–∏—è</h3>
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                    <input type="text" id="templateName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>–®–∞–±–ª–æ–Ω –≤–æ–ø—Ä–æ—Å–∞:</label>
                    <textarea id="questionTemplate" class="form-control" required></textarea>
                    <small class="form-hint">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ {A}, {B} –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</small>
                </div>
                <div class="form-group">
                    <label>–§–æ—Ä–º—É–ª–∞ –æ—Ç–≤–µ—Ç–∞:</label>
                    <textarea id="answerTemplate" class="form-control" required></textarea>
                    <small class="form-hint">–ü—Ä–∏–º–µ—Ä: {A} + {B}</small>
                </div>
                <div id="paramsContainer" class="params-container"></div>
                <div class="form-actions">
                    <button id="saveTemplateBtn" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="cancelBtn" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ -->
            <div id="templatesList" class="templates-list">
                {% for template in templates %}
                <div class="template-card" data-id="{{ template.id }}">
                    <div class="template-header">
                        <h3>‚Ññ{{ loop.index }}: {{ template.name }}</h3>
                        <div class="template-actions">
                            <input type="checkbox" class="template-checkbox" data-id="{{ template.id }}">
                            <button class="btn-icon edit-btn">‚úèÔ∏è</button>
                            <button class="btn-icon delete-btn">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="template-content">
                        <p><strong>–í–æ–ø—Ä–æ—Å:</strong> {{ template.question_template }}</p>
                        <p><strong>–û—Ç–≤–µ—Ç:</strong> {{ template.answer_template }}</p>
                    </div>
                </div>
                {% else %}
                <p class="no-templates">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤</p>
                {% endfor %}
            </div>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/textbook_tasks.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bulk_actions.js') }}"></script>
</body>
</html>